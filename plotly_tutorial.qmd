---
title: "Some title"
format: revealjs
execute:
  echo: false
---

## some title
```{python}
import plotly.express as px

days = ["Monday", "Tuesday", "Wednesday"]
sleep_hours = [8, 5, 10]

fig = px.bar(
  x = days, 
  y = sleep_hours, 
  title = "Hours of sleep"
)
fig.show()
```

## some title
```{python}
import plotly.express as px

days = ["Monday", "Tuesday", "Wednesday"]
sleep_hours = [8, 5, 10]

fig = px.bar(
  x = days, 
  y = sleep_hours, 
  title = "Hours of sleep"
)
fig.show()
```

## some title
```{python}
print(fig)
```

## some title
```{python}
fig = px.histogram(
  data_frame = px.data.iris(),
  x = "petal_length", 
  nbins = 10
)
fig.show()
```

## some title
```{python}
fig = px.histogram(
  data_frame = px.data.iris(),
  x = "petal_length", 
  nbins = 20
)
fig.show()
```

## some title
```{python}
fig = px.histogram(
  data_frame = px.data.iris(),
  y = "petal_length", 
  nbins = 20
)
fig.show()
```

## some title
```{python}
fig = px.box(
  data_frame = px.data.iris(),
  y = "petal_length"
)
fig.show()
```

## some title
```{python}
fig = px.box(
  data_frame = px.data.iris(),
  x = "species",
  y = "petal_length",
  points="all"
)
fig.show()
```

## some title
```{python}
fig = px.box(
  data_frame = px.data.iris(),
  y = "petal_length",
  points="all"
)
fig.show()
```

## some title
```{python}
fig = px.box(
  data_frame = px.data.iris(),
  y = "petal_length",
  points="all",
  hover_data=["species"]
)
fig.show()
```

## some title
```{python}
import pandas as pd

days = ["Monday", "Tuesday", "Wednesday"]
sleep_hours = [8, 5, 10]

sleep = pd.DataFrame({
    "day": days,
    "sleep_hours": sleep_hours
})

fig = px.bar(
  data_frame=sleep,
  x = "day", 
  y = "sleep_hours", 
  title = "Hours of sleep",
  color = "day"
)
fig.show()
```

## some title
```{python}
fig = px.bar(
  data_frame=sleep,
  x = "day", 
  y = "sleep_hours", 
  title = "Hours of sleep",
  color_discrete_map={
    "Monday": "rgb(0, 0, 255)",
    "Tuesday": "rgb(0, 255,0)",
    "Wednesday": "rgb(255, 0, 0)"
  },
  color = "day"
)
fig.show()
```

## some title
```{python}
my_colors = {
    "Monday": "rgb(0, 0, 255)",
    "Tuesday": "rgb(0, 255,0)",
    "Wednesday": "rgb(255, 0, 0)"
  }
fig = px.box(
  data_frame=px.data.iris(),
  x = "species",
  y = "petal_length",
  title = "Hours of sleep",
  color_discrete_map=my_colors,
  color = "species"
)
fig.show()
```

## some title
```{python}
fig = px.bar(
  data_frame=sleep,
  x = "day", 
  y = "sleep_hours", 
  title = "Hours of sleep",
  color_continuous_scale = "inferno",
  color = "sleep_hours"
)
fig.show()
```

## some title
```{python}
custom_color = [
  ("rgb(0, 0, 255)"),
  ("rgb(0, 255,0)"),
  ("rgb(255, 0, 0)")
]
fig = px.bar(
  data_frame=sleep,
  x = "day", 
  y = "sleep_hours", 
  title = "Hours of sleep",
  color_continuous_scale = custom_color,
  color = "sleep_hours"
)
fig.show()
```

## some title
```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "sepal_length",
  y = "petal_length"
)
fig.show()
```

## some title
```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "sepal_length",
  y = "petal_length",
  symbol="species"
)
fig.show()
```

## some title
```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "sepal_length",
  y = "petal_length",
  symbol="species",
  color="species"
)
fig.show()
```

## Scatter plot with trendline
```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "sepal_length",
  y = "petal_length",
  symbol="species",
  color="species",
  trendline = "ols"
)
fig.show()
```

## Line plot
```{python}
fig = px.line(
  data_frame = px.data.stocks(),
  x = "date",
  y = "GOOG"
)
fig.show()
```

## Correlation plot

```{python}
iris_corr = px.data.carshare().corr(method="pearson")

fig = px.imshow(
    # Pass the correlation matrix
    iris_corr,
    # Show the correlation values in each cell
    text_auto=True,
    # Set the color scale
    color_continuous_scale="RdYlGn")
fig.show()
```

## Correlation plot

```{python}
iris_corr = px.data.carshare().corr(method="pearson")

fig = px.imshow(
    # Pass the correlation matrix
    iris_corr,
    # Show the correlation values in each cell
    text_auto=True,
    # Set the color scale
    color_continuous_scale="RdYlGn",
    # Set min and max values
    zmin=-1, zmax=1)
fig.show()
```

## Hover information

```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "petal_width",
  y = "petal_length"
)
fig.show()
```

## Hover information

```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "petal_width",
  y = "petal_length",
  hover_data=["species"]
)
fig.show()
```

## Hover information with `hoverlabel`

```{python}
fig = px.scatter(
    data_frame = px.data.iris(),
    x = "petal_width",
    y = "petal_length",
    hover_data=["species"]
)

fig.update_layout(
    hoverlabel=dict(
        bgcolor="white",
        font_size=16,
        font_family="Rockwell"
    )
)

fig.show()
```

## Plot legend

```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "sepal_length",
  y = "petal_length",
  symbol="species",
  color="species"
)
fig.show()
```

## Style plot legend

```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "sepal_length",
  y = "petal_length",
  symbol="species",
  color="species"
)

# Create legend dictionary
my_legend = dict(
  x=0.2,
  y=0.95, 
  bgcolor="rgb(240, 229, 111)"
)

fig.update_layout(
  showlegend=True, 
  legend=my_legend
)
fig.show()
```

## Annotations

```{python}
fig = px.bar(
  data_frame=sleep,
  x = "day", 
  y = "sleep_hours", 
  title = "Hours of sleep",
  color = "day"
)
# Create the first annotation
low = dict(
    x="Tuesday", y=5, text="Less sleep",
    font=dict(color="black"), showarrow=True, arrowhead=4
)

# Create the second annotation
high = dict(
    x="Wednesday", y=10, text="More sleep",
    font=dict(color="black"), showarrow=True, arrowhead=4,
)

# Add annotations to the figure
fig.update_layout(annotations=[low, high])

# Show the plot
fig.show()
```

## Annotations

```{python}
h_sleep = 8
message_annotation = dict(
  x="Monday", y=9,
  # Set the format of the text and box
  text=f"Monday: {h_sleep} hours",
  font=dict(size=20, color="white"),
  bgcolor="rgb(237, 64, 200)", showarrow=False
)

fig.update_layout(annotations=[message_annotation])

fig.show()
```

## Annotations

```{python}
h_sleep = 8
message_annotation = dict(
  x=0.33, y=0.8, xref="paper", yref="paper",
  # Set the format of the text and box
  text=f"Monday: {h_sleep} hours",
  font=dict(size=20, color="white"),
  bgcolor="rgb(237, 64, 200)", showarrow=False
)

fig.update_layout(annotations=[message_annotation])

fig.show()
```

## Axis labels

```{python}
fig = px.bar(
  data_frame=sleep,
  x = "day", 
  y = "sleep_hours", 
  title = "Hours of sleep",
  color = "day"
)

fig.update_xaxes(title_text="Day")
fig.update_yaxes(title_text="Sleep time (hours)")

fig.show()
```

## Axis labels

```{python}
fig = px.bar(
  data_frame=sleep,
  x = "day", 
  y = "sleep_hours", 
  title = "Hours of sleep",
  color = "day"
)

fig.update_layout(dict(
  xaxis=dict(title = dict(text="Day")),
  yaxis=dict(title = dict(text="Sleep time (hours)"))
))

fig.show()
```

## Axis labels

```{python}
fig = px.bar(
  data_frame=sleep,
  x = "day", 
  y = "sleep_hours", 
  title = "Hours of sleep",
  color = "day"
)

fig.update_layout(dict(
  xaxis=dict(title = dict(text="Day")),
  yaxis=dict(title = dict(text="Sleep time (hours)"),
             range = [4, 15]
  )
))

fig.show()
```

## Axis transformation

```{python}
fig = px.scatter(
  data_frame = px.data.iris(),
  x = "sepal_length",
  y = "petal_length",
  color="species",
  log_y= True
)

fig.show()
```

## Subplots

```{python}
import plotly.express as px
from plotly.subplots import make_subplots
# Create a subplot grid
fig = make_subplots(rows=2, cols=1)
# Create plotly express figures
hist = px.histogram(px.data.iris(), x='petal_length')
box = px.box(px.data.iris(), x='petal_length')
# Extract traces and add to subplots
fig.add_trace(hist.data[0], row=1, col=1)
fig.add_trace(box.data[0], row=2, col=1)
```

## Subplots

```{python}
fig = make_subplots(
  rows=2, cols=1,
  subplot_titles=['Histogram of petal lengths', 
                  'Box plot of petal lengths'])
# Create plotly express figures
hist = px.histogram(px.data.iris(), x='petal_length')
box = px.box(px.data.iris(), x='petal_length')
# Extract traces and add to subplots
fig.add_trace(hist.data[0], row=1, col=1)
fig.add_trace(box.data[0], row=2, col=1)

fig.show()
```

## Stacked subplots

```{python}
fig = make_subplots(
    rows=3, cols=1,
    subplot_titles=['Setosa', 'Versicolor', 'Virginica']
)

row_num = 1
df_all = px.data.iris()
for species in ['setosa', 'versicolor', 'virginica']:
    df = df_all[df_all['species'] == species]
    scatter = px.scatter(df, x='petal_length', y='sepal_length')
    fig.add_trace(scatter.data[0], row=row_num, col=1)
    row_num += 1

fig.show()
```

## Shared axes

```{python}
fig = make_subplots(
    rows=3, cols=1,
    subplot_titles=['Setosa', 'Versicolor', 'Virginica'],
    shared_xaxes=True
)

row_num = 1
df_all = px.data.iris()
for species in ['setosa', 'versicolor', 'virginica']:
    df = df_all[df_all['species'] == species]
    scatter = px.scatter(df, x='petal_length', y='sepal_length')
    fig.add_trace(scatter.data[0], row=row_num, col=1)
    row_num += 1

fig.show()
```